!function(){"use strict";window.jQuery,jQuery((function(a){var e=".awsm-b-job-wrap",s=".awsm-b-job-listings",t=".awsm-b-filter-wrap",n=window.location.protocol+"//"+window.location.host+window.location.pathname,i=!0;function o(e){var s=[],t=["listings","specs","search","lang","taxonomy","termId"];t.push("awsm-layout"),t.push("awsm-hide-expired-jobs"),t.push("awsm-other-options"),a(document).trigger("awsmJobBlockListingsData",[t]);var n=e.data();return a.each(n,(function(e,n){-1===a.inArray(e,t)&&s.push({name:e,value:n})})),s}function r(e){var n=e.find(s),r=e.find(t+" form"),l=r.serializeArray(),d=n.data("listings"),m=n.data("specs"),b=n.data("awsm-layout"),c=n.data("awsm-hide-expired-jobs"),p=n.data("awsm-other-options");e.find(".awsm-b-filter-item").each((function(){var e=a(this).data("filter"),s=new URLSearchParams(document.location.search).get(e),t=a(this).find(".awsm-b-filter-option");0===t.val().length&&s&&s.length>0&&l.forEach((function(a){a.name===t.attr("name")&&(a.value="-1")}))})),l.push({name:"listings_per_page",value:d}),void 0!==m&&l.push({name:"shortcode_specs",value:m}),void 0!==b&&l.push({name:"awsm-layout",value:b}),void 0!==c&&l.push({name:"awsm-hide-expired-jobs",value:c}),void 0!==p&&l.push({name:"awsm-other-options",value:p});var w=o(n);w.length>0&&(l=l.concat(w)),a(document).trigger("awsmJobBlockFiltersFormData",[n,l]),i&&(i=!1,a.ajax({url:r.attr("action"),beforeSend:function(){n.addClass("awsm-b-jobs-loading")},data:l,type:r.attr("method")}).done((function(s){n.html(s);var t=e.find(".awsm-b-job-search");t.length>0&&(t.val().length>0?(e.find(".awsm-b-job-search-btn").addClass("awsm-b-job-hide"),e.find(".awsm-b-job-search-close-btn").removeClass("awsm-b-job-hide")):e.find(".awsm-b-job-search-btn").removeClass("awsm-b-job-hide")),a(document).trigger("awsmjobs_filtered_listings",[e,s])})).fail((function(a){console.log(a)})).always((function(){n.removeClass("awsm-b-jobs-loading"),i=!0})))}function l(a){var t=a.parents(e),n=t.find(".awsm-b-job-search").val();if(t.find(s).data("search",n),0===n.length&&t.find(".awsm-b-job-search-icon-wrapper").addClass("awsm-b-job-hide"),m(t,"jq",n),awsmJobsPublic.deep_linking.search){var i=t.find('input[name="awsm_pagination_base"]');d("jq",n,i.val())}r(t)}var d=function(a,e,s){s=(s=void 0!==s?s:n).split("?")[0];var t=new URLSearchParams(document.location.search);t.has("paged")&&t.delete("paged"),t.has("page")&&t.delete("page"),""!==(e=null!=e?String(e):"")?t.set(a,e):t.delete(a);var i=t.toString();i.length>0&&(i="?"+i),window.history.replaceState({},"",s+i)},m=function(a,e,s){var t=a.find('input[name="awsm_pagination_base"]');if(t.length>0){var n=t.val().split("?"),i="";n.length>1&&(i=n[1]);var o=new URLSearchParams(i);s.length>0?o.set(e,s):o.delete(e),t.val(n[0]+"?"+o.toString()),a.find('input[name="paged"]').val(1)}};function b(){a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").each((function(){var e=a(this),s=e.find(".awsm-b-filter-item").first().offset().top,t=e.find(".awsm-b-filter-item").last().offset().top;window.innerWidth<768?e.removeClass("awsm-b-full-width-search-filter-wrap"):t>s&&e.addClass("awsm-b-full-width-search-filter-wrap")}))}a(".awsm-b-job-no-more-jobs-get").length>0&&(a(".awsm-b-job-listings").hide(),a(".awsm-b-job-no-more-jobs-get").slice(1).hide()),a(t+" .awsm-b-filter-option").on("change",(function(s){s.preventDefault(),a(".awsm-b-job-listings").show();var t=a(this),n=t.find("option:selected"),i=t.parents(e),o=t.parents(".awsm-b-filter-item").data("filter"),l=n.data("slug");if(l=void 0!==l?l:"",a(".awsm-b-job-listings").length>0&&i.find(".awsm-b-job-no-more-jobs-get").hide(),m(i,o,l),awsmJobsPublic.deep_linking.spec){var b=i.find('input[name="awsm_pagination_base"]');d(o,l,b.val())}r(i)})),a(t+" .awsm-b-job-search-btn").on("click",(function(){l(a(this))})),a(t+" .awsm-b-job-search-close-btn").on("click",(function(){var s=a(this);s.parents(e).find(".awsm-b-job-search").val(""),l(s)})),a(t+" .awsm-b-job-search").on("keypress",(function(e){13==e.which&&(e.preventDefault(),l(a(this)))})),a(s).on("click",".awsm-b-jobs-pagination .awsm-b-load-more-btn, .awsm-b-jobs-pagination a.page-numbers",(function(n){n.preventDefault();var i=a(this),r=i.hasClass("awsm-b-load-more-btn"),l=1,m=[],b=i.parents(e),c=b.find(s),p=i.parents(".awsm-b-jobs-pagination"),w=c.data("listings"),h=c.data("specs"),u=c.data("lang"),f=c.data("search"),g=c.data("awsm-layout"),v=c.data("awsm-hide-expired-jobs"),j=c.data("awsm-other-options");r?(i.prop("disabled",!0),l=void 0===(l=i.data("page"))?1:l):(p.find(".page-numbers").removeClass("current").removeAttr("aria-current"),i.addClass("current").attr("aria-current","page")),p.addClass("awsm-b-jobs-pagination-loading");var _=b.find(t+" form");if(function(e){var s=!1;return e.length>0&&e.find(".awsm-b-filter-option").each((function(){a(this).val().length>0&&(s=!0)})),s}(_)&&(m=_.find(".awsm-b-filter-option").serializeArray()),!r){var y=i.attr("href"),C=y.split("?"),x="",P=window.awsmJobsPublic&&awsmJobsPublic.is_homepage?"page":"paged";if(C.length>1){var S=new URLSearchParams(C[1]);(l=S.get(P)||S.get("page"===P?"paged":"page"))||(l=1),S.delete("page"),S.delete("paged"),S.toString().length>0&&(x="?"+S.toString())}else{var k=y.match(/\/page\/(\d+)\/?/);l=k?k[1]:1}y=C[0]+x,m.push({name:"awsm_pagination_base",value:C[0]+x}),awsmJobsPublic.deep_linking.pagination&&d(P,l,y)}if(awsmJobsPublic.is_tax_archive){var J=c.data("taxonomy"),D=c.data("termId");void 0!==J&&void 0!==D&&m.push({name:"awsm_job_spec["+J+"]",value:D})}m.push({name:"action",value:"block_loadmore"},{name:"paged",value:l}),void 0!==w&&m.push({name:"listings_per_page",value:w}),void 0!==h&&m.push({name:"shortcode_specs",value:h}),void 0!==g&&m.push({name:"awsm-layout",value:g}),void 0!==v&&m.push({name:"awsm-hide-expired-jobs",value:v}),void 0!==j&&m.push({name:"awsm-other-options",value:j}),void 0!==u&&m.push({name:"lang",value:u}),void 0!==f&&m.push({name:"jq",value:f}),a(document).trigger("awsmjobs_block_load_more",[c,m]);var L=o(c);L.length>0&&(m=m.concat(L)),a.ajax({url:awsmJobsPublic.ajaxurl,data:a.param(m),type:"POST",beforeSend:function(){r?i.text(awsmJobsPublic.i18n.loading_text):c.addClass("awsm-b-jobs-loading")}}).done((function(e){if(e){var s=p.data("effectDuration");p.remove(),r?c.append(e):(c.html(e),c.removeClass("awsm-b-jobs-loading"),void 0!==s&&(s=isNaN(s)?s:Number(s),a("html, body").animate({scrollTop:b.offset().top-25},s)))}else i.remove();a(document).trigger("awsmjobs_load_more",[i,e])})).fail((function(a){console.log(a)}))})),a(document).on("click",".awsm-b-filter-toggle",(function(e){e.preventDefault();var s=a(this);s.toggleClass("awsm-on"),s.hasClass("awsm-on")?s.attr("aria-pressed","true"):s.attr("aria-pressed","false"),s.parent().find(".awsm-b-filter-items").slideToggle()})),a(".awsm-b-filter-wrap").not(".awsm-b-no-search-filter-wrap").length>0&&(b(),a(window).on("resize",b))}))}();